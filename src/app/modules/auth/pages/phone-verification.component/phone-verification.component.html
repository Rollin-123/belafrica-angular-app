<div class="bel-container">
    <div class="bel-card">

        <div class="bel-auth-header">
            <app-logo size="medium"></app-logo>
        </div>

        <div style="margin-bottom: var(--bel-spacing-xl);">
            <h2 class="bel-title" style="text-align: left; font-size: 28px; margin-bottom: var(--bel-spacing-sm);">
                Dans quel pays r√©sidez-vous ?
            </h2>
            <p class="bel-subtitle" style="text-align: left; margin-bottom: 0;">
                Votre num√©ro de t√©l√©phone nous permet de valider votre pays de r√©sidence et d'assigner la communaut√© correspondante.
            </p>
        </div>
        
        <div *ngIf="successMessage" class="bel-alert-success" style="margin-bottom: 20px;">
            ‚úÖ {{ successMessage }}
        </div>
        
        <form [formGroup]="phoneForm" (ngSubmit)="onSubmit()">
            
            <div style="margin-bottom: var(--bel-spacing-lg);">
                <label style="display: block; margin-bottom: var(--bel-spacing-sm); font-weight: 600;">
                    Pays de r√©sidence
                </label>
                <select 
                    formControlName="countryCode" 
                    class="form-field-bel"
                    style="width: 100%; padding: 12px; border: 2px solid var(--bel-border); border-radius: var(--bel-radius-md); font-size: 16px; color: var(--bel-text-primary);"
                >
                    <option *ngFor="let country of europeanCountries" [value]="country.code">
                        {{ country.name }} ({{ country.code }})
                    </option>
                </select>
            </div>

            <div style="margin-bottom: var(--bel-spacing-lg);">
                <label style="display: block; margin-bottom: var(--bel-spacing-sm); font-weight: 600;">
                    Num√©ro de t√©l√©phone
                </label>
                <input 
                    type="tel" 
                    formControlName="phoneNumber"
                    placeholder="Ex: 12 34 56 789"
                    (keypress)="onKeyPress($event)"
                    (input)="formatPhone($event)"
                    inputmode="numeric"
                    class="form-field-bel"
                    style="width: 100%; padding: 12px; border: 2px solid var(--bel-border); border-radius: var(--bel-radius-md); font-size: 16px;"
                >
                <small *ngIf="phoneForm.get('phoneNumber')?.invalid && phoneForm.get('phoneNumber')?.touched" 
                       style="color: var(--bel-color-accent); margin-top: 4px; display: block;">
                    Veuillez entrer un num√©ro de t√©l√©phone valide.
                </small>
                <small style="color: var(--bel-gray); margin-top: 4px; display: block;">
                    ‚ö†Ô∏è Ce num√©ro et votre pays de r√©sidence seront <strong>immuables</strong> apr√®s validation.
                </small>
            </div>

            <button 
                type="submit" 
                class="bel-btn-primary" 
                [disabled]="!phoneForm.valid || isLoading"
                style="width: 100%; padding: 14px; font-size: 16px;"
            >
                <span *ngIf="!isLoading">Recevoir le code par SMS</span>
                <span *ngIf="isLoading">
                    <span style="display: inline-block; animation: spin 1s linear infinite; margin-right: 8px;">‚è≥</span>
                    Envoi en cours...
                </span>
            </button>
            
            <!-- <div style="margin-top: 20px; text-align: center; color: var(--bel-gray); font-size: 14px;">
                <p>üí° Pour les tests, utilisez le code : <strong>123456</strong></p>
                <p>üîó Backend : http://localhost:3000</p>
            </div> -->
            
        </form>
    </div>
</div>
<div class="bel-chat-container">
  
  <!-- Header du Chat -->
  <header class="bel-chat-header">
    <button class="bel-back-btn" (click)="goBack()">
      â†
    </button>
    
    <div class="bel-chat-info" *ngIf="conversation$ | async as conversation">
      <div class="bel-chat-avatar">
        <span class="bel-avatar-icon">
          {{ conversation.type === 'group' ? 'ğŸ‘¥' : 'ğŸ‘¤' }}
        </span>
      </div>
      <div class="bel-chat-details">
        <h3>{{ conversation.name }}</h3>
        <p *ngIf="conversation.type === 'group'">
          Groupe communautaire â€¢ {{ conversation.participants.length }} membre(s)
        </p>
        <p *ngIf="conversation.type === 'private'">
          En ligne
        </p>
      </div>
    </div>

    
  </header>

  <!-- Zone des Messages -->
  <main class="bel-chat-messages" #messagesContainer>
    <div *ngIf="(messages$ | async)?.length === 0" class="bel-no-messages">
      <div class="bel-no-messages-icon">ğŸ’¬</div>
      <h3>Aucun message</h3>
      <p>Soyez le premier Ã  envoyer un message dans cette conversation !</p>
    </div>

    <div class="bel-messages-list">
      <div 
        *ngFor="let message of messages$ | async"
        class="bel-message-wrapper"
        [class.my-message]="isMyMessage(message)"
        [class.other-message]="!isMyMessage(message)">
        
        <div class="bel-message-bubble">
          <!-- En-tÃªte du message -->
          <div class="bel-message-header" *ngIf="!isMyMessage(message)">
            <strong class="bel-message-sender">{{ message.fromUserName }}</strong>
          </div>

          <!-- Contenu du message -->
          <div class="bel-message-content">
            {{ message.content }}
          </div>

          <!-- Pied du message -->
          <div class="bel-message-footer">
            <span class="bel-message-time">
              {{ formatMessageTime(message.timestamp) }}
            </span>
            
            <span *ngIf="isMyMessage(message)" class="bel-message-status">
              {{ message.isRead ? 'ğŸ‘ï¸' : 'âœ“' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Input d'envoi -->
  <footer class="bel-chat-input">
    <div class="bel-input-container">
      <button class="bel-attachment-btn" title="Joindre un fichier">
        ğŸ“
      </button>
      
      <textarea
        #messageInput
        [(ngModel)]="newMessage"
        (keydown)="onKeyPress($event)"
        placeholder="Tapez votre message..."
        class="bel-message-input"
        rows="1"
        [disabled]="isSending">
      </textarea>

      <button 
        class="bel-send-btn"
        (click)="sendMessage()"
        [disabled]="!newMessage.trim() || isSending"
        [class.sending]="isSending">
        {{ isSending ? 'â³' : 'ğŸ“¤' }}
      </button>
    </div>

    <div class="bel-chat-features">
      <small>ğŸ’¡ Appuyez sur EntrÃ©e pour envoyer, Shift+EntrÃ©e pour un saut de ligne</small>
    </div>
  </footer>

</div>
<div class="bel-profile-container">
  
  <!-- Header avec bouton retour -->
  <header class="bel-profile-header">
    <div class="bel-profile-header-content">
      <button (click)="goBackToSettings()" class="bel-back-btn" title="Retour aux param√®tres">
        ‚Üê Retour
      </button>
      <h1>Mon Profil</h1>
    </div>
    <p>G√©rez vos informations personnelles</p>
  </header>

  <!-- Avatar et Informations de base -->
  <div class="bel-profile-avatar-section">
    <div class="bel-avatar-container">
      <img 
        [src]="user?.avatar || userService.generateDefaultAvatar(user?.pseudo || '')" 
        [alt]="user?.pseudo" 
        class="bel-avatar-image">
      
      <!-- Bouton de changement d'avatar -->
      <div class="bel-avatar-actions">
        <input 
          type="file" 
          id="avatarInput"
          (change)="onAvatarSelected($event)"
          accept="image/*" 
          class="bel-file-input">
        <label for="avatarInput" class="bel-avatar-upload-btn" title="Changer la photo">
          üì∑
        </label>
      </div>
    </div>
    
    <div class="bel-user-basic-info">
      <h2 class="bel-user-name">{{ user?.pseudo }}</h2>
      <p class="bel-user-community">Communaut√© {{ user?.community }}</p>
      <p class="bel-user-member-since">Membre depuis {{ getMemberSince() }}</p>
    </div>
  </div>

  <!-- Contenu Principal -->
  <main class="bel-profile-content">
    
    <!-- Mode √âdition -->
    <div *ngIf="isEditing" class="bel-edit-section">
      <div class="bel-edit-card">
        <h3>‚úèÔ∏è Modifier mon profil</h3>
        
        <form (ngSubmit)="saveProfile()" class="bel-edit-form">
          
          <!-- Pseudo -->
          <div class="bel-form-group">
            <label for="pseudo">Pseudonyme *</label>
            <input
              type="text"
              id="pseudo"
              [value]="editData.pseudo"
              (input)="editData.pseudo = ($any($event.target).value)"
              name="pseudo"
              required
              maxlength="30"
              class="bel-form-input">
            <small>Votre nom d'affichage sur la plateforme</small>
          </div>

          <!-- Bio -->
          <div class="bel-form-group">
            <label for="bio">Bio</label>
            <textarea
              id="bio"
              [value]="editData.bio"
              (input)="editData.bio = ($any($event.target).value)"
              name="bio"
              rows="3"
              maxlength="200"
              placeholder="D√©crivez-vous en quelques mots..."
              class="bel-form-textarea"></textarea>
            <small>{{ editData.bio?.length || 0 }}/200 caract√®res</small>
          </div>

          <!-- Genre -->
          <div class="bel-form-group">
            <label for="gender">Genre</label>
            <select
              id="gender"
              [value]="editData.gender"
              (change)="editData.gender = ($any($event.target).value)"
              name="gender"
              class="bel-form-select">
              <option value="">S√©lectionnez...</option>
              <option *ngFor="let gender of genders" [value]="gender.value">
                {{ gender.label }}
              </option>
            </select>
          </div>

          <!-- Profession -->
          <div class="bel-form-group">
            <label for="profession">Profession</label>
            <input
              type="text"
              id="profession"
              [value]="editData.profession"
              (input)="editData.profession = ($any($event.target).value)"
              name="profession"
              placeholder="Votre m√©tier..."
              class="bel-form-input">
          </div>

          <!-- Centres d'int√©r√™t -->
          <div class="bel-form-group">
            <label>Centres d'int√©r√™t</label>
            <div class="bel-interests-container">
              <div *ngFor="let interest of editData.interests" class="bel-interest-tag">
                {{ interest }}
                <button type="button" (click)="removeInterest(interest)" class="bel-interest-remove">
                  √ó
                </button>
              </div>
              <input
                type="text"
                placeholder="Ajouter un int√©r√™t (Entr√©e pour valider)"
                (keydown)="addInterest($event)"
                class="bel-interest-input">
            </div>
            <small>Appuyez sur Entr√©e apr√®s chaque int√©r√™t</small>
          </div>

          <!-- Actions -->
          <div class="bel-form-actions">
            <button type="button" (click)="cancelEditing()" class="bel-btn-cancel" [disabled]="isLoading">
              Annuler
            </button>
            <button type="submit" class="bel-btn-primary" [disabled]="isLoading">
              {{ isLoading ? '‚è≥ Enregistrement...' : 'üíæ Enregistrer' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Mode Consultation -->
    <div *ngIf="!isEditing" class="bel-view-section">
      
      <!-- Informations Personnelles -->
      <div class="bel-info-card">
        <div class="bel-card-header">
          <h3>üìã Informations personnelles</h3>
          <button (click)="startEditing()" class="bel-edit-btn" title="Modifier le profil">
            ‚úèÔ∏è Modifier
          </button>
        </div>
        
        <div class="bel-info-grid">
          <div class="bel-info-item">
            <span class="bel-info-label">Pseudonyme:</span>
            <span class="bel-info-value">{{ user?.pseudo }}</span>
          </div>
          
          <div class="bel-info-item">
            <span class="bel-info-label">Email:</span>
            <span class="bel-info-value">{{ user?.email || 'Non sp√©cifi√©' }}</span>
          </div>
          
          <div class="bel-info-item">
            <span class="bel-info-label">Genre:</span>
            <span class="bel-info-value">
              {{ getGenderLabel(user?.gender) }}
            </span>
          </div>
          
          <div class="bel-info-item" *ngIf="user?.profession">
            <span class="bel-info-label">Profession:</span>
            <span class="bel-info-value">{{ user?.profession }}</span>
          </div>
        </div>

        <!-- Bio -->
        <div class="bel-bio-section" *ngIf="user?.bio">
          <h4>√Ä propos</h4>
          <p class="bel-bio-text">{{ user?.bio }}</p>
        </div>

      </div>

    </div>

  </main>

</div>
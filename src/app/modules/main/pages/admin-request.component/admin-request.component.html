<div class="bel-admin-request-container">
  
  <header class="bel-admin-header">
    <button (click)="goBack()" class="bel-back-btn">â† Retour</button>
    <h1>Devenir Administrateur</h1>
    <p>Publiez du contenu pour votre communautÃ© aprÃ¨s vÃ©rification manuelle</p>
  </header>

  <div class="bel-admin-process">
    
    <!-- Statut Admin -->
    <div *ngIf="isAdmin" class="bel-admin-status success">
      <div class="bel-status-icon">âœ…</div>
      <div class="bel-status-content">
        <h3>Administrateur Actif</h3>
        <p>Vous pouvez maintenant publier du contenu pour la communautÃ© <strong>{{ user?.community }}</strong></p>
      </div>
    </div>

    <!-- Demande en attente -->
    <div *ngIf="hasPendingRequest && !isAdmin" class="bel-admin-status pending">
      <div class="bel-status-icon">â³</div>
      <div class="bel-status-content">
        <h3>Demande en Cours de Traitement</h3>
        <p>Votre demande est en cours de vÃ©rification par notre Ã©quipe.</p>
        <p class="bel-status-note">Vous recevrez un code de validation par email sous 48h.</p>
      </div>
    </div>

    <!-- Processus de demande -->
    <div *ngIf="!hasPendingRequest && !isAdmin" class="bel-admin-steps">
      
      <!-- Ã‰tape 1 : Information -->
      <div class="bel-admin-step">
        <div class="bel-step-header">
          <span class="bel-step-number">@</span>
          <h3>Processus de VÃ©rification</h3>
        </div>
        <p>Pour garantir la sÃ©curitÃ© de notre communautÃ©, chaque administrateur est vÃ©rifiÃ© manuellement.</p>
        
        <div class="bel-requirements">
          <h4>ğŸ“‹ Documents Requis :</h4>
          <ul class="bel-requirements-list">
            <li>ğŸ“¸ <strong>Photo de piÃ¨ce d'identitÃ©</strong> (passeport, carte d'identitÃ© ou permis)</li>
            <li>ğŸ’¬ <strong>Explication de votre motivation</strong> (minimum 50 caractÃ¨res)</li>
            <li>â³ <strong>DÃ©lai de traitement :</strong> 24-48 heures</li>
          </ul>
        </div>
      </div>

      <!-- Ã‰tape 2 : Formulaire -->
      <form [formGroup]="adminForm" (ngSubmit)="submitRequest()" class="bel-admin-form">
        
        <!-- Photo du passeport -->
        <div class="bel-form-group">
          <label class="bel-form-label">
            ğŸ“¸ Photo de PiÃ¨ce d'IdentitÃ© *
            <span class="bel-required">*</span>
          </label>
          
          <div class="bel-passport-upload" [class.has-image]="passportPreview">
            <div class="bel-passport-preview">
              <img 
                [src]="passportPreview" 
                *ngIf="passportPreview" 
                class="bel-passport-image"
                alt="AperÃ§u piÃ¨ce d'identitÃ©">
              
              <div *ngIf="!passportPreview" class="bel-passport-placeholder">
                <div class="bel-placeholder-icon">ğŸ“„</div>
                <p class="bel-placeholder-text">Cliquez pour prendre une photo</p>
                <small>Format acceptÃ© : JPG, PNG (max. 5MB)</small>
              </div>
            </div>
            
            <div class="bel-upload-controls">
              <input 
                type="file" 
                #passportInput
                (change)="onPassportSelected($event)"
                accept="image/jpeg,image/png"
                capture="environment"
                class="bel-file-input">
              
              <button 
                type="button" 
                class="bel-btn-secondary bel-upload-btn"
                (click)="passportInput.click()">
                <span class="bel-btn-icon">ğŸ“·</span>
                Prendre une Photo
              </button>
              
              <div class="bel-upload-hints">
                <p class="bel-hint">ğŸ’¡ <strong>Conseils :</strong></p>
                <ul class="bel-hints-list">
                  <li>Photo bien Ã©clairÃ©e et lisible</li>
                  <li>Masquez les informations sensibles si nÃ©cessaire</li>
                  <li>Seule la photo sera visible par le crÃ©ateur</li>
                </ul>
              </div>
            </div>
          </div>

          <div *ngIf="adminForm.get('passportPhoto')?.invalid && adminForm.get('passportPhoto')?.touched" 
               class="bel-error-message">
            âš ï¸ Une photo de piÃ¨ce d'identitÃ© est requise
          </div>
        </div>

        <!-- Information additionnelle -->
        <div class="bel-form-group">
          <label for="additionalInfo" class="bel-form-label">
            ğŸ’¬ Votre Motivation *
            <span class="bel-required">*</span>
          </label>
          
          <textarea
            id="additionalInfo"
            formControlName="additionalInfo"
            placeholder="Expliquez pourquoi vous souhaitez devenir administrateur et comment vous comptez contribuer Ã  la communautÃ©..."
            rows="5"
            maxlength="500"
            class="bel-form-textarea"
            [class.invalid]="adminForm.get('additionalInfo')?.invalid && adminForm.get('additionalInfo')?.touched">
          </textarea>
          
          <div class="bel-textarea-meta">
            <span class="bel-char-count">
              {{ adminForm.get('additionalInfo')?.value?.length || 0 }}/500 caractÃ¨res
            </span>
            <span *ngIf="adminForm.get('additionalInfo')?.invalid && adminForm.get('additionalInfo')?.touched" 
                  class="bel-error-text">
              Minimum 50 caractÃ¨res requis
            </span>
          </div>
        </div>

        <!-- ConfidentialitÃ© -->
        <div class="bel-privacy-notice">
          <div class="bel-privacy-icon">ğŸ”’</div>
          <div class="bel-privacy-content">
            <h4>ConfidentialitÃ© Garantie</h4>
            <p>Votre piÃ¨ce d'identitÃ© est envoyÃ©e uniquement au crÃ©ateur de BELAFRICA et sera supprimÃ©e aprÃ¨s vÃ©rification.</p>
          </div>
        </div>

        <!-- Bouton de soumission -->
        <button 
          type="submit" 
          class="bel-btn-primary bel-submit-btn"
          [disabled]="!adminForm.valid || isLoading"
          [class.loading]="isLoading">
          
          <span *ngIf="!isLoading" class="bel-btn-content">
            <span class="bel-btn-icon">ğŸ“¨</span>
            Soumettre ma Demande
          </span>
          
          <span *ngIf="isLoading" class="bel-btn-content">
            <span class="bel-loading-spinner"></span>
            Envoi en cours...
          </span>
        </button>

      </form>
    </div>

    <!-- Section Code Admin -->
    <div *ngIf="!isAdmin" class="bel-admin-code-section">
      <div class="bel-code-header">
        <h3>ğŸ”‘ Code de Validation</h3>
        <p *ngIf="!hasPendingRequest">Si vous avez dÃ©jÃ  reÃ§u un code :</p>
      </div>
      
      <div class="bel-code-input-group">
        <input 
          type="text" 
          [(ngModel)]="adminCode"
          placeholder="Entrez votre code JWT ici..."
          class="bel-code-input"
          [class.has-code]="adminCode"
          [disabled]="hasPendingRequest">
        
        <button 
          (click)="validateAdminCode()"
          class="bel-btn-secondary bel-validate-btn"
          [disabled]="!adminCode || hasPendingRequest"
          [class.loading]="validatingCode">
          
          <span *ngIf="!validatingCode">âœ… Valider</span>
          <span *ngIf="validatingCode" class="bel-loading-spinner small"></span>
        </button>
      </div>

      <div *ngIf="codeError" class="bel-code-error">
        âŒ {{ codeError }}
      </div>
    </div>

  </div>

  <!-- Informations de contact -->
  <footer class="bel-admin-footer">
    <div class="bel-contact-card">
      <div class="bel-contact-header">
        <span class="bel-contact-icon">ğŸ“</span>
        <h4>Support & Contact</h4>
      </div>
      
      <div class="bel-contact-info">
        <p><strong>Email du crÃ©ateur :</strong> rollinloictianga@gmail.com</p>
        <p><strong>DÃ©lai de traitement :</strong> 24-48 heures maximum</p>
        <p class="bel-contact-note">Pour toute question concernant votre demande d'administration</p>
      </div>
    </div>
  </footer>

</div>